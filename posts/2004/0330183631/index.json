{
    "data" :  {
    "title": "インスト奮闘記、Fedora CoreとZope2.7とPlone2をインストール",
    "date": "2004-03-31 03:36:00 +0900 JST",
    "dir": "posts/2004/",
    "slug": "0330183631",
    "categories": ["tech"],
    "tags": []
}

---



<p></p>
<p>   たくさんこの記事書いてたのに消えたー。なので簡易版。春から始まる新授業用Webのために、<a href="http://plone.org/">Plone2</a>をいかに安定した環境で動かすか。何度も失敗したが失敗談じゃなくて、成功した方法とひっかかったポイントのまとめ。 </p>
<p>   <em><strong>Fedora Coreインストール</strong></em> </p>
<p>   redhat7.2ではうまくいかなったりしたので<a href="http://fedora.redhat.com/">Fedora Core</a>を入れる。もちろんすんなり。<a href="http://yusukebe.com/archives/001985.html">aptは便利</a>だ。 </p>
<p>   <em><strong>Python2.3インストール</strong></em> </p>
<p>   Plone2で必要。<a href="http://www.python.org/2.3.3/rpms.html">Linux RPMs for Python 2.3.3のページ</a>からsrc.rpmを持ってきて<em>rpmbuild   --rebuild</em>するもどこかのディレクトリの<em>_tkinter.so*</em>がないとか言って怒られる。tkinterというのは<a href="http://www.python.jp/pub/doc_jp/lib/module-Tkinter.html">pythonのGUIのなんちゃららしい</a>ので今回のインストールには必要ない。そこでSPECファイルの該当部を書き換える。<br>   <em>#%{__prefix}/lib/python%{libvers}/lib-dynload/_tkinter.so*</em>    <br>   とコメントアウト。その後<em># rpmbuild -ba python-2.3.spec</em>としてビルド成功。インストール。 </p>
<p>   <em><strong>Zope2.7インストール</strong></em> </p>
<p>   Zope2.7には<a href="http://zope.org/Members/medienlabor/packages">redhat用のRPMも用意されていて</a>、src.rpmをビルドするためには<a href="http://d.hatena.ne.jp/noboruhi/20031124#p3">RPM4.1のおせっかいな機能に注意しなくてはいけなくて</a>、ところがインストールしたあとにどうも具合が悪い。起動しない。そこでソースからビルド。<a href="http://zope.org/Products/Zope/2.7.0">このページ</a>にある<a href="http://zope.org/Products/Zope/2.7.0/Zope-2.7.0.tgz">Zope-2.7.0.tgz   (2.61 M)</a> をダウンロードして解凍。中にある<em>doc/INSTALL.txt</em>を参考にすれば万事OK。起動スクリプト(/etc/rc.d/init.d/zope)を以下のように作成。 </p>
<p>   <sup>#!/bin/sh                                                                                                                     <br>   # chkconfig: 2345 82 18                                                                                                       <br>   # description: Zope, the web application server                                                                            </sup></p>
<p>   <sup># Source function library.                                                                                                    <br>   . /etc/rc.d/init.d/functions</sup> </p>
<p>   <sup>RETVAL=0</sup> </p>
<p>   <sup>start() {<br>       echo -n "Starting Zope: "<br>       /var/zope/bin/zopectl start<br>       RETVAL=$?<br>       echo<br>       return $RETVAL<br>   }<br>   stop() {<br>       echo -n "Stopping Zope: "<br>       /var/zope/bin/zopectl stop<br>       RETVAL=$?<br>       echo<br>       return $RETVAL<br>   }<br>   case "$1" in<br>       start)<br>           start<br>               ;;</sup> </p>
<p>   <sup>    stop)<br>           stop<br>               ;;</sup> </p>
<p>   <sup>    restart)<br>           stop<br>               start<br>                     ;;</sup> </p>
<p>   <sup>    *)<br>           echo "Usage: zope {start|stop|restart}"<br>               exit 1</sup> </p>
<p>   <sup>esac </sup></p>
<p>   <em><strong>Plone2インストール</strong></em> </p>
<p>   いよいよ最後の砦Plone2。実は<a href="http://plone.org/downloads">こちらのダウンロードページ</a>にはZopeも含めたパッケージがRPMで配布されていてそれを使えば一発で入るのだが、どうもそれだとZope自体の使い勝手が悪くなるので、Zopeを立ててからPlone2をプロダクトとして追加する。<a href="http://prdownloads.sourceforge.net/plone/CMFPlone-2.0-final.tar.gz?download">Plone   Core</a>をダウンロードしてZopeインスタンスディレクトリの<em>Products</em>の中に解凍。Zopeを再起動すれば追加されている。 </p>
<p>   <em><strong>やった動いたー</strong></em> </p>
<p>   <img alt="plone.jpg" border="0" class="at-xid-6a0133f4781589970b015435b6df39970c" height="206" src="https://yusukebe.com/archives/a/6a0133f4781589970b015435b6df39970c-pi.jpg" width="300"> </p>


 
}
